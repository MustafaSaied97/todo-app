{"ast":null,"code":"import React,{useEffect,useState}from'react';import{convertTempTo,ENDPOINTS,getCurrentLocation,callApi}from'src/utils';import Tabs from'@mui/material/Tabs';import Tab from'@mui/material/Tab';import Box from'@mui/material/Box';import moment from'moment';import Table from'@mui/material/Table';import TableBody from'@mui/material/TableBody';import TableCell from'@mui/material/TableCell';import TableContainer from'@mui/material/TableContainer';import TableRow from'@mui/material/TableRow';import Paper from'@mui/material/Paper';import Skeleton from'@mui/material/Skeleton';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function WeatherPage(){const[isLoading,setisLoading]=useState(false);const[weatherList,setWeatherList]=useState([]);const[weatherDataArr,setWeatherDataArr]=useState([]);const[value,setValue]=useState(0);const numberOfDay=24/3;const handleChange=(event,newValue)=>{setValue(newValue);setWeatherDataArr(weatherList[newValue]);};const getWeatherData=async()=>{let coordinates=await getCurrentLocation();try{setisLoading(true);let{list}=await callApi({method:ENDPOINTS.getHourlyWeather.method,url:\"\".concat(ENDPOINTS.getHourlyWeather.url,\"?lat=\").concat(coordinates===null||coordinates===void 0?void 0:coordinates.lat,\"&lon=\").concat(coordinates===null||coordinates===void 0?void 0:coordinates.lon,\"&appid=\").concat(process.env.REACT_APP_WEATHER_API_KEY)});const res=list.reduce((acc,curr,i)=>{if(!(i%numberOfDay)){// if index is 0 or can be divided by the `size`...\nacc.push(list.slice(i,i+numberOfDay));// ..push a chunk of the original array to the accumulator\n}return acc;},[]);setWeatherList(res);setWeatherDataArr(res[0]);}catch(err){}finally{setisLoading(false);}};useEffect(()=>{getWeatherData();},[]);return/*#__PURE__*/_jsx(_Fragment,{children:isLoading?/*#__PURE__*/_jsxs(Box,{sx:{mt:5,bgcolor:'background.paper',display:'flex',justifyContent:'center',flexDirection:'column',alignItems:'center',gap:5},children:[/*#__PURE__*/_jsx(Skeleton,{animation:\"wave\",variant:\"rectangular\",width:\"60%\",height:100,style:{borderRadius:6}}),/*#__PURE__*/_jsx(Skeleton,{animation:\"wave\",variant:\"rectangular\",width:\"80%\",height:\"50vh\",style:{borderRadius:6}})]}):/*#__PURE__*/_jsxs(Box,{sx:{mt:5,bgcolor:'background.paper',display:'flex',justifyContent:'center',flexDirection:'column',alignItems:'center',gap:5},children:[/*#__PURE__*/_jsx(Tabs,{value:value,onChange:handleChange,variant:\"\",sx:{marginLeft:'auto',marginRight:'auto',width:\"100%\",maxWidth:'700px',overflow:\"auto\"},scrollButtons:true,allowScrollButtonsMobile:true,\"aria-label\":\"scrollable force tabs example\",children:weatherList.map((weatherListItem,index)=>/*#__PURE__*/_jsx(Tab,{label:moment(weatherListItem[0].dt_txt).format('dddd')},index))}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsx(Table,{sx:{minWidth:650},\"aria-label\":\"simple table\",children:/*#__PURE__*/_jsx(TableBody,{children:weatherDataArr.map((weatherData,index)=>{var _weatherData$weather$,_weatherData$weather$2,_weatherData$main;return/*#__PURE__*/_jsxs(TableRow,{sx:{'&:last-child td, &:last-child th':{border:0}},children:[/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:moment(weatherData.dt_txt).format('LT')}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://openweathermap.org/img/wn/\".concat(weatherData===null||weatherData===void 0?void 0:(_weatherData$weather$=weatherData.weather[0])===null||_weatherData$weather$===void 0?void 0:_weatherData$weather$.icon,\"@2x.png\"),width:\"50\",alt:\"\"})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:weatherData===null||weatherData===void 0?void 0:(_weatherData$weather$2=weatherData.weather[0])===null||_weatherData$weather$2===void 0?void 0:_weatherData$weather$2.main}),/*#__PURE__*/_jsxs(TableCell,{align:\"center\",children:[convertTempTo(weatherData===null||weatherData===void 0?void 0:(_weatherData$main=weatherData.main)===null||_weatherData$main===void 0?void 0:_weatherData$main.temp,'K-C'),\"\\xB0C\"]})]},index);})})})})]})});}","map":{"version":3,"names":["React","useEffect","useState","convertTempTo","ENDPOINTS","getCurrentLocation","callApi","Tabs","Tab","Box","moment","Table","TableBody","TableCell","TableContainer","TableRow","Paper","Skeleton","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","WeatherPage","isLoading","setisLoading","weatherList","setWeatherList","weatherDataArr","setWeatherDataArr","value","setValue","numberOfDay","handleChange","event","newValue","getWeatherData","coordinates","list","method","getHourlyWeather","url","concat","lat","lon","process","env","REACT_APP_WEATHER_API_KEY","res","reduce","acc","curr","i","push","slice","err","children","sx","mt","bgcolor","display","justifyContent","flexDirection","alignItems","gap","animation","variant","width","height","style","borderRadius","onChange","marginLeft","marginRight","maxWidth","overflow","scrollButtons","allowScrollButtonsMobile","map","weatherListItem","index","label","dt_txt","format","component","minWidth","weatherData","_weatherData$weather$","_weatherData$weather$2","_weatherData$main","border","align","src","weather","icon","alt","main","temp"],"sources":["/home/hmaserv/Desktop/github/todo-app/src/views/pages/WeatherPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { convertTempTo, ENDPOINTS, getCurrentLocation, callApi } from 'src/utils';\nimport Tabs from '@mui/material/Tabs';\nimport Tab from '@mui/material/Tab';\nimport Box from '@mui/material/Box';\nimport moment from 'moment';\nimport Table from '@mui/material/Table';\nimport TableBody from '@mui/material/TableBody';\nimport TableCell from '@mui/material/TableCell';\nimport TableContainer from '@mui/material/TableContainer';\nimport TableRow from '@mui/material/TableRow';\nimport Paper from '@mui/material/Paper';\nimport Skeleton from '@mui/material/Skeleton';\n\nexport default function WeatherPage() {\n  const [isLoading, setisLoading] = useState(false);\n  const [weatherList, setWeatherList] = useState([]);\n  const [weatherDataArr, setWeatherDataArr] = useState([]);\n  const [value, setValue] = useState(0);\n  const numberOfDay = 24 / 3;\n\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n    setWeatherDataArr(weatherList[newValue]);\n  };\n  const getWeatherData = async () => {\n    let coordinates = await getCurrentLocation();\n    try {\n      setisLoading(true);\n      let { list } = await callApi({\n        method: ENDPOINTS.getHourlyWeather.method,\n        url: `${ENDPOINTS.getHourlyWeather.url}?lat=${coordinates?.lat}&lon=${coordinates?.lon}&appid=${process.env.REACT_APP_WEATHER_API_KEY}`,\n      });\n      const res = list.reduce((acc, curr, i) => {\n        if (!(i % numberOfDay)) {\n          // if index is 0 or can be divided by the `size`...\n          acc.push(list.slice(i, i + numberOfDay)); // ..push a chunk of the original array to the accumulator\n        }\n        return acc;\n      }, []);\n      setWeatherList(res);\n      setWeatherDataArr(res[0]);\n    } catch (err) {\n    } finally {\n      setisLoading(false);\n    }\n  };\n  useEffect(() => {\n    getWeatherData();\n  }, []);\n\n  return (\n    <>\n      {isLoading ? (\n        <Box sx={{ mt: 5, bgcolor: 'background.paper', display: 'flex', justifyContent: 'center', flexDirection: 'column', alignItems: 'center', gap: 5 }}>\n          <Skeleton animation='wave' variant='rectangular' width='60%' height={100} style={{ borderRadius: 6 }} />\n          <Skeleton animation='wave' variant='rectangular' width='80%' height='50vh' style={{ borderRadius: 6 }} />\n        </Box>\n      ) : (\n        <Box sx={{ mt: 5, bgcolor: 'background.paper', display: 'flex', justifyContent: 'center', flexDirection: 'column', alignItems: 'center', gap: 5 }}>\n          <Tabs value={value} onChange={handleChange} variant='' sx={{marginLeft:'auto',marginRight:'auto',width:\"100%\",maxWidth:'700px',overflow:\"auto\"}} scrollButtons allowScrollButtonsMobile aria-label='scrollable force tabs example'>\n        {weatherList.map((weatherListItem,index)=><Tab label={moment(weatherListItem[0].dt_txt).format('dddd')} key={index} />)}\n      </Tabs>\n          <TableContainer component={Paper}>\n            <Table sx={{ minWidth: 650 }} aria-label='simple table'>\n              <TableBody>\n                {weatherDataArr.map((weatherData, index) => (\n                  <TableRow key={index} sx={{ '&:last-child td, &:last-child th': { border: 0 } }}>\n                    <TableCell align='center'>{moment(weatherData.dt_txt).format('LT')}</TableCell>\n                    <TableCell align='center'>\n                      <img src={`https://openweathermap.org/img/wn/${weatherData?.weather[0]?.icon}@2x.png`} width='50' alt='' />\n                    </TableCell>\n                    <TableCell align='center'>{weatherData?.weather[0]?.main}</TableCell>\n                    <TableCell align='center'>{convertTempTo(weatherData?.main?.temp, 'K-C')}Â°C</TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </Box>\n      )}\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}